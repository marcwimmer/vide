#!/bin/bash

function update_repo() {
    while [[ ! -d "$1" ]]; do
        sleep 1
    done
    cd $1
    git clean -f -x -d &>/dev/null
    git pull &>/dev/null 
}

# update repos locally on internet connection;
if [[ ! -d ~/.vim/UltiSnips ]]; then
    cd ~/.vim
    git clone https://github.com/marcwimmer/vim-ultisnippets
fi
update_repo ~/.vim/UltiSnips
update_repo ~/.vim/bundle/vim-my-settings

# too much cpu
#~/gitwatch.sh -r origin ~/.vim/UltiSnips &> /dev/null

while true;
do
    cd ~/.vim/UltiSnips
    git pull --no-edit >> /dev/null
    git commit --no-edit -am autocommit >> /dev/null
    git add --no-edit . >> /dev/null
    git push >> /dev/null
    sleep 60
done
